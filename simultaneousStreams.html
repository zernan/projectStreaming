<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>Javascript Project</title>
	
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  <link rel="stylesheet" href="streamingData.css">	

</head>

<body>
<div class="container" data-drop-target="true" ondrop="dropIt(event);" ondragover="event.preventDefault();">

	<h2 align="center">STREAMING WEB APP</h2>
	
		<div id="dragAndDrop1" draggable="true" ondragstart="dragIt(event);">
			
			<h3>Twitch Clips</h3>
			<div class="twitch">
			</div>
		</div>	

		<div id="dragAndDrop2" draggable="true" ondragstart="dragIt(event);">
				
				<h3>Twitter Feed</h3>
				<div class="twitter">
						<!-- <div id="twitter">
							<div id="twitter_t">
							</div>
							<div id="twitter_m">
							<div id="twitter_container">
								<ul id="twitter_update_list">
									
								</ul>
							</div>
							</div>
						</div>
						<div id="twitter_b">
							
						</div> -->
				</div>
		</div>
				
		
		<div id="dragAndDrop3" draggable="true" ondragstart="dragIt(event);" align="center">
				<h5>Type keyword to search streams</h5>
				<input type="text" id="txtBox"/>
				<button id="searchBtn" height=100px width=200px>Search</button>
			<br>
		</div>
		
</div> <!-- end of class container -->
<!--<div class="recipient" data-drop-target="true" ondrop="dropIt(event);" ondragover="event.preventDefault();">
</div> -->	

<script>

		
	let dragIt = function(event) {
		
		event.dataTransfer.setData("Text", event.target.id);
	}

	let dropIt = function(event) {
		
		let passedData = event.dataTransfer.getData("Text");
		let elem = document.getElementById(passedData);
		event.target.appendChild(elem);
		event.preventDefault();
		return false;
	}

	let twitch = getElementById("dragAndDrop1");
	let twitter = getElementById("dragAndDrop2");
	let searcher = getElementById("dragAndDrop3");

	/*let startX = 0;
 	let startY = 0;
 	let offsetX = 0;
  	let offsetY = 0;
 	let	temp;
 

	let mm = function(e) {
    	if (e == null)
    		let e = window.event;
    		
    	temp.style.left = (offsetX + e.clientX - startX) + 'px';
    	temp.style.top = (offsetY + e.clientY - startY) + 'px';
	}*/
	
	let md = function(event){
		var target = e.target != null ? e.target : e.srcElement;
    	if (target.id == 'dragAndDrop1' || target.id == 'dragAndDrop2' || target.id == 'dragAndDrop3') {
    		
    		startX = e.clientX;
    		startY = e.clientY;
 
    		offsetX = parseInt(target.style.left);
    		offsetX = null || isNaN(_offsetX) ? 0 : _offsetX;
    		offsetY = parseInt(target.style.top);
    		offsetY = null || isNaN(_offsetY) ? 0 : _offsetY;
 
    		temp = target;
 
    		//window.onmousemove = mm;
    		return false;
    	}
	}

	twitch.addEventListener("mousedown", md);
	twitter.addEventListener("mousedown", md);
	searcher.addEventListener("mousedown", md);

	</script>

	<!--<script>
		
		let searcher = document.getElementById("searchBtn");
		let txt = document.getElementById("txtBox");
		
		let twitch = document.getElementsByClassName('twitch')[0];
		let twitter = document.getElementsByClassName('twitter')[0];
		let frame = document.getElementById("iframeTwitch");
		let colorList = ['red', 'blue', 'green', 'yellow', 'orange'];

		function requestTwitchStreams {
	     	
	     	let val = txt.value;
			let xhr = new XMLHttpRequest();
			
			let url = "https://api.twitch.tv/kraken/streams?channel=" + val + "&client_id=t7yj1dhusvoyzlng9u6p1a4yhw6qsp&redirect_uri=http://localhost&redirect&scope=user_read";
			
			xhr.onreadystatechange = (e)=> {

				if (this.readyState === 4) {
        			alert('Loaded');
        			if(this.status === 200){
            			var myChannelItems = JSON.parse(this.response);
	            		alert("response");
	            		if(myChannelItems.length > 0){
		            		for(let i=0; i<myChannelItems; i++){
		            			let div = document.createElement('div');
		            			div.style='background:' + colorLit[i%5];
		            			div.innerHTML = myChannelItems[i];
		            			twitch.appendChild(div);
		            		}
	            		}
            		}
            		else{
            			alert('Status other than 200');
            			//alert(this.response);
            		}
        		}
        		else
    	        {
    	        	alert("Ready State:" + this.readyState);
    	        	//alert(this.response);
    	        }
			}

			xhr.open('GET', url, true);
			xhr.send();
									
 		}

 		function requestTwitterStreams {
	     	 
	     	let val = txt.value;
	     	
	     	let url = "https://publish.twitter.com/oembed?url=https://twitter.com/" + val;
	     	
			let xhr = new XMLHttpRequest();
			
			
			xhr.onreadystatechange = (e)=> {
        		if (this.readyState == 4) {
        			alert('request Loaded');
        			if(this.status == 200) {
            			let myTweets = JSON.parse(this.responseText);
	            		
	            		if(myTweets.length > 0){
		            		for(let i=0; i<myTweets; i++){
		            			let div = document.createElement('div');
		            			div.style='background:' + colorLit[i%5];
		            			div.innerHTML = myTweets[i];
		            			twitter.appendChild(div);
		            		}
	            		}
            		}
            		else{
            			alert('Status other than 200');
            		}
        		}
        		else
    	        {
    	        	alert("Unable to get requested tweets!!!");
    	        }
			}

			xhr.open('GET', url, true);
			xhr.send();
									
 		}

 		
			
			//searcher.addEventListener("click", requestTwitchStreams);
    		//searcher.addEventListener("click", requestTwitterStreams);
    		
	</script> -->

	
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
	
</body>
</html>